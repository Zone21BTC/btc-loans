# Zone21 Risk Scores

This is a public repository containing **raw 13-factor risk scores** assigned by Zone21 to Bitcoin-backed loan products. Each provider’s data file can be found in `providers/<slug>/data.json`. Continuous Integration (CI) scripts aggregate these into easily downloadable datasets: `dist/all-providers.json` (pretty) and `dist/all-providers.min.json` (compact).

These data are used on the [Zone21 website](https://www.zone21.com/).

→ **Full methodology:** See [`docs/risk-model.md`](docs/risk-model.md)

---

## 📑 Contents

| Section                                      | Description                                                      |
| -------------------------------------------- | ---------------------------------------------------------------- |
| [Motivation](#motivation)                    | Why this dataset exists and what it solves.                      |
| [Folder Layout](#folder-layout)              | File structure and editing responsibilities.                     |
| [Data Model](#data-model)                    | Explanation of each field in a provider’s JSON file.             |
| [Build & Validation](#build--validation)     | How CI generates aggregate data and ensures data integrity.      |
| [Quick Start](#quick-start)                  | Quick guide for cloning, validating, and building locally.       |
| [Contributing](#contributing)                | Guidelines for submitting updates and improvements.              |
| [License & Attribution](#license--attribution)| Licensing details and citation format.                           |

---

## Motivation

Bitcoin-backed lending products vary significantly in areas like custody, rehypothecation, oracle reliability, and legal jurisdiction. Zone21’s **13-factor Risk Score** quantitatively highlights these differences, allowing borrowers and researchers to easily compare providers and assess systemic risks.

For detailed information on the scoring methodology, please refer to the [**Zone21 Risk Model**](docs/risk-model.md).

---

## Folder Layout

```
/
├── providers/                   # Human-edited source files
│   ├── aave/data.json
│   ├── ledn/data.json
│   └── ...
├── schema/
│   └── provider.schema.json     # JSON schema (single source of truth)
├── docs/
│   └── risk-model.md            # Methodology and documentation
├── scripts/
│   ├── validate.js              # Schema validation using AJV
│   └── build-aggregate.js       # Creates aggregated files in dist/
├── dist/                        # Auto-generated by CI (do not edit directly)
│   ├── all-providers.json
│   └── all-providers.min.json
├── .github/workflows/
│   └── build.yml                # CI workflow definitions
└── README.md
```

### Source-of-truth vs Generated Artefacts

| Directory               | Edited by                    | Contents                                          |
| ----------------------- | ---------------------------- | ------------------------------------------------- |
| `providers/*/data.json` | Zone21 team & contributors   | Raw scores, notes, evidence URLs, and metadata.  |
| `docs/`                 | Zone21 team & contributors   | Documentation and methodology explanations.      |
| `dist/*`                | CI bot                       | Computed aggregate JSON files.                   |

⚠️ **Please don't commit directly to the `dist/` folder; automated checks will gently reject such PRs.**

---

## Data Model

Each `data.json` is validated by [`schema/provider.schema.json`](./schema/provider.schema.json). Here are the key level-1 fields:

| Field           | Type                 | Description                                                                     |
| --------------- | -------------------- | ------------------------------------------------------------------------------- |
| `provider_name` | `string`             | Human-readable name of the loan provider or product.                            |
| `slug`          | `string`             | Unique, URL-safe, lowercase kebab-case identifier (e.g., 'ledn').               |
| `model_version` | `string`             | Version of the Zone21 risk-scoring methodology (e.g., '1.0').                   |
| `highlights`    | `string`             | Short narrative summary highlighting key strengths or weaknesses.               |
| `introduction`  | `string`             | Background information about the provider.                                         |
| `status`        | `string`             | Operational status: 'active', 'inactive', or 'withdrawn'.                       |
| `is_beta`       | `boolean` (optional) | Flag indicating if the provider is a beta product.                              |
| `notes`         | `string` (optional)  | Additional remarks not covered by specific factor notes.                        |
| `details`       | `object`             | Structured product details displayed in UI tables.                              |
| `factors`       | `object`             | Contains 13 sub-objects each with a `score`, `note`, and optionally `evidence`. |

The `evidence` sub-object includes:

- `link`: URL to the supporting document (image or PDF).
- `type`: Type of evidence ('image' or 'pdf').
- `source_url`: URL to the original source of evidence.
- `created_at`: UTC datetime indicating when the evidence was retrieved (e.g., '2025-07-29T05:04:11Z').

> **Note:** Fields like `final_score`, `risk_band`, and penalty-related fields are calculated automatically and do not appear in source files.

---

## Build & Validation

The repository uses [AJV](https://ajv.js.org/) for schema validation, ensuring data accuracy and consistency.

| Stage         | Trigger                      | What Happens                                                         |
| ------------- | ---------------------------- | -------------------------------------------------------------------- |
| **Validate**  | Pull request                 | Validates modified provider data files against schema using AJV.      |
| **Aggregate** | Merge to `main`              | Aggregates validated files, calculates scores, applies penalties, and outputs final JSON files to `dist/`. |

### Dependencies

- **Node.js version ≥ 20 (latest LTS recommended)**
- Install dependencies with `npm install` (AJV schema validation, Prettier formatting).

---

## Quick Start

```bash
# Clone the repository
git clone https://github.com/Zone21BTC/zone21-risk-scores.git && cd zone21-risk-scores

# Install dependencies
npm install

# Validate all provider files
npm run validate

# Generate aggregate dataset locally (outputs to ./dist)
npm run build
```

To fetch the latest aggregated data directly:

```bash
curl -sL https://raw.githubusercontent.com/Zone21BTC/zone21-risk-scores/main/dist/all-providers.json | jq '.[0]'
```

---

## Contributing

We warmly welcome contributions! To suggest changes or improvements:

1. **Fork** the repository, create a new branch, and open a pull request (PR).
2. **Run validation (`npm run validate`)** before submitting a PR.
3. Ensure your PR is clear and concise. Reviewers will primarily focus on the accuracy of factor scores and reasoning.
4. Must pass all CI checks. It validates the schema and calculates derived fields automatically.

Please avoid committing directly to the `dist/` directory; changes to these files will be automatically rejected to maintain data integrity.

Code style follows standard Prettier formatting (run `npm run format` if needed).

---

## License & Attribution

- **Data:** Released under [Creative Commons CC-BY-4.0](https://creativecommons.org/licenses/by/4.0/). Please cite as "Zone21 Risk Scores" and include a link back to this repository.

---

> **Disclaimer:** These scores represent research opinions, not financial advice. Always perform your own due diligence.
